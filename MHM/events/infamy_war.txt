### Events 96130-96150 used

#########################################################################
#																		#
#         Infamy Wars -- Coalition Against a High-Infamy country		#
#																		#
#########################################################################

#First warning against the nation
country_event = {

	id = 96130
	title = "EVTNAME96130" #The Price of Infamy
	desc = "EVTDESC96130"
	news = yes
	news_desc_long = "EVTDESC96130_NEWS_LONG"
	news_desc_medium = "EVTDESC96130_NEWS_MEDIUM"
	news_desc_short = "EVTDESC96130_NEWS_SHORT"
	picture = "greatpowers"
	
	major = yes

	trigger = {
		badboy = 1
		is_disarmed = no
		is_vassal = no
		NOT = {
			has_country_modifier = international_pariah
			has_country_modifier = punitive_effects
		}
	}

	mean_time_to_happen = {
		months = 3
		modifier = { factor = 2 has_global_flag = UNSG_passive }
		modifier = { factor = 0.5 has_global_flag = UNSG_aggressive }
		
		modifier = { factor = 0.5 badboy = 1.25 }
	}

	option = {
		name = "EVTOPTA96130" #Let them come!
		prestige = -20
		add_country_modifier = {
			name = international_pariah
			duration = -1
		}
		
		#All nations that are pacifist stay away from us
		any_country = {
			limit = {
				ai = yes
				is_vassal = no
				war_policy = pacifism
			}
			relation = {
				who = THIS
				value = -200
			}
		}
		
		### International anger based on ideology group ###
		
		#Communist group
		random_owned = { 
			limit = { owner = { OR = { ruling_party_ideology = communist ruling_party_ideology = communist_social } } } 
			owner = { 
				any_country = { 
					limit = { 
						is_vassal = no 
						NOT = { OR = { ruling_party_ideology = communist ruling_party_ideology = communist_social } } 
					} 
					relation = { who = THIS value = -200 }
				}
			}
		}
		
		#Traditionalist group
		random_owned = { 
			limit = { owner = { ruling_party_ideology = traditionalist } }
			owner = { 
				any_country = { 
					limit = { 
						is_vassal = no 
						NOT = { ruling_party_ideology = traditionalist } 
					} 
					relation = { who = THIS value = -200 }
				}
			}
		}
		
		#Nationalist and Populist group
		random_owned = { 
			limit = { owner = { OR = { ruling_party_ideology = nationalist ruling_party_ideology = populist } } }
			owner = { 
				any_country = { 
					limit = { 
						is_vassal = no 
						NOT = { OR = { ruling_party_ideology = nationalist ruling_party_ideology = populist } } 
					} 
					relation = { who = THIS value = -200 }
				}
			}
		}
		
		#Remainder group
		random_owned = { 
			limit = { owner = { NOT = { OR = { ruling_party_ideology = communist ruling_party_ideology = communist_social ruling_party_ideology = traditionalist ruling_party_ideology = nationalist ruling_party_ideology = populist } } } }
			owner = { 
				any_country = { 
					limit = { 
						is_vassal = no 
						NOT = { OR = { ruling_party_ideology = nationalist ruling_party_ideology = populist } } 
					} 
					relation = { who = THIS value = -200 }
				}
			}
		}

	}
}

#Removes the pariah modifier if the player has low enough Infamy
country_event = {
	
	id = 96131
	title = "EVTNAME96131" #An Ease in Tensions
	desc = "EVTDESC96131"
	picture = "greatpowers"

	trigger = {
		has_country_modifier = international_pariah
		NOT = { has_country_modifier = punitive_effects }
		OR = { 
			NOT = { badboy = 1 } 
			is_vassal = yes 
		}
	}

	mean_time_to_happen = {
		months = 1
	}

	option = {
		name = "EVTOPTA96131" #Thanks for the vote of confidence.
		remove_country_modifier = international_pariah
	}
}

#An AI UNSC GP will deliver the ultimatum
country_event = {
	
	id = 96135
	title = EVTNAME96135
	desc = EVTDESC96135
	
	trigger = {
		ai = yes
		
		#Capable of going to war
		war = no
		is_disarmed = no
		has_recently_lost_war = no
		
		#Member of the UNSC
		is_greater_power = yes
		has_country_modifier = unsc_permanent_member
		
		#Not a pariah as well
		NOT = { has_country_modifier = international_pariah }
		
		#Have enough infamy to spare
		NOT = { badboy = 0.35 }
		
		NOT = {
			has_global_flag = ultimatum_delivered
			has_global_flag = ultimatum_refused
			has_country_modifier = no_more_war
			has_country_modifier = punitive_effects
		}
		
		#Enemy GP
		any_greater_power = {
			badboy = 1.2
			is_disarmed = no

			has_country_modifier = international_pariah
			
			#Would prefer to embargo rather than risk all-out nuclear war
			NOT = { OR = { has_country_modifier = atomic_nation has_country_modifier = hydrogen_nation } }
			
			NOT = { has_country_modifier = punitive_effects }
			NOT = { has_country_flag = ultimatum_accepted }
			
			#Does not have good relations with THIS
			NOT = { relation = { who = THIS value = 0 } }
			NOT = { alliance_with = THIS }
			NOT = { truce_with = THIS }
			
			#Has a lower military score than THIS
			NOT = { military_score = THIS }
			
			#Not member of the same bloc
			NOT = {
				OR = {
					AND = { OR = { has_country_modifier = communist_bloc has_country_modifier = communist_bloc_leader } THIS = { OR = { has_country_modifier = communist_bloc has_country_modifier = communist_bloc_leader } } }
					AND = { OR = { has_country_modifier = democratic_bloc has_country_modifier = democratic_bloc_leader } THIS = { OR = { has_country_modifier = democratic_bloc has_country_modifier = democratic_bloc_leader } } }
					
					AND = { has_country_modifier = alliance_nato THIS = { has_country_modifier = alliance_nato } }
					AND = { has_country_modifier = rio_pact THIS = { has_country_modifier = rio_pact } }
					
					AND = { has_country_modifier = warsaw_pact THIS = { has_country_modifier = warsaw_pact } }
					AND = { has_country_modifier = csto_alliance THIS = { has_country_modifier = csto_alliance } }
					
					AND = { has_country_modifier = anzus_alliance THIS = { has_country_modifier = anzus_alliance } }
					
					AND = { has_country_modifier = sco_pact THIS = { has_country_modifier = sco_pact } }
					
					AND = { has_country_modifier = cento_member THIS = { has_country_modifier = cento_member } }
				}
			}
		}
	}

	mean_time_to_happen = {
		months = 2
		
		#Fast response if THIS is a Superpower
		modifier = {
			factor = 0.5
			OR = { 
				has_country_modifier = un_king1 
				has_country_modifier = un_king2 
			}
		}
		modifier = {
			factor = 0.5
			rank = 2
			any_greater_power = {
				has_country_modifier = international_pariah
				rank = 1
			}
		}
		modifier = {
			factor = 2
			NOT = { rank = 1 }
			any_greater_power = {
				ai = yes
				rank = 1
			}
		}
	}

	option = {
		name = EVTOPTA96135
		set_global_flag = ultimatum_delivered
		random_country = {
			limit = {
				badboy = 1.2
				is_disarmed = no
				is_vassal = no
				has_country_modifier = international_pariah
			
				NOT = { has_country_modifier = punitive_effects }
				NOT = { has_country_flag = ultimatum_accepted }
			
				NOT = { relation = { who = THIS value = 50 } }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
			}
			country_event = 96136
		}
	}
}

#The Ultimatum event: disarm or war
country_event = {

	id = 96136
	title = "EVTNAME96136" #The Ultimatum
	desc = "EVTDESC96136"
	news = yes
	news_desc_long = "EVTDESC96136_NEWS_LONG"
	news_desc_medium = "EVTDESC96136_NEWS_MEDIUM"
	news_desc_short = "EVTDESC96136_NEWS_SHORT"
	picture = "the_ultimatum"

	#major = yes

	is_triggered_only = yes

	option = {
		name = "EVTOPTA96136" #Refuse
		clr_global_flag = ultimatum_delivered
		set_global_flag = ultimatum_refused
		any_country = {
			limit = {
				ai = yes
				is_vassal = no
				OR = {
					NOT = {
						tag = FROM
						alliance_with = THIS
						in_sphere = THIS
						vassal_of = THIS
					}
					war_policy = pacifism
				}
			}
			relation = {
				who = THIS
				value = -200
			}
			relation = {
				who = FROM
				value = 200
			}
		}
		FROM = {
			set_country_flag = coalition_member
			
			war = {
				target = THIS
				attacker_goal = {
					casus_belli = free_dismantle_cb
				}
				call_ally = yes
			}
			
		}
		ai_chance = { 
			factor = 0.50
			modifier = { factor = 0 war_policy = pacifism }
			modifier = { factor = 0 is_disarmed = yes }
		}
	}

	option = {
		name = "EVTOPTB96136" #Agree
		clr_global_flag = ultimatum_delivered
		set_country_flag = ultimatum_accepted
		any_country = {
			limit = {
				ai = yes
				is_greater_power = yes
				NOT = { alliance_with = THIS }
			}
			set_country_flag = coalition_member
		}
		
		#Dismantle sphere
		country_event = 960101
		
		ai_chance = { 
			factor = 0.50 
			modifier = { factor = 0 AND = { rank = 2 is_disarmed = no NOT = { war_policy = pacifism } } }
			modifier = { factor = 0 war_policy = jingoism }
		}
	}
}

#Other AI GP's joining the war effort
country_event = {

	id = 96140
	title = EVTNAME96140
	desc = EVTDESC96140

	trigger = {
		has_global_flag = ultimatum_refused
		NOT = { has_country_flag = coalition_member }
		NOT = { has_country_modifier = punitive_effects }
		ai = yes
		war = no
		is_disarmed = no
		is_greater_power = yes
		
		#Not a pariah as well
		NOT = { has_country_modifier = international_pariah }
		
		#Have enough infamy to spare
		NOT = { badboy = 0.2 }
		
		any_greater_power = {
			badboy = 1.2
			is_disarmed = no

			has_country_modifier = international_pariah
			
			NOT = { has_country_modifier = punitive_effects }
			NOT = { has_country_flag = ultimatum_accepted }
			
			NOT = { relation = { who = THIS value = 50 } }
			NOT = { alliance_with = THIS }
			NOT = { truce_with = THIS }
		}
	}

	mean_time_to_happen = {
		months = 1
		modifier = {
			factor = 0.5
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				war = yes
			}
		}
		modifier = {
			factor = 1.5
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				NOT = { neighbour = THIS }
			}
		}			
		modifier = {
			factor = 2
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				capital_scope = { continent = europe }
			}
			NOT = {
				any_owned_province = { continent = europe }
			}
		}
		modifier = {
			factor = 0.5
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				capital_scope = { continent = africa }
			}
			NOT = {
				any_owned_province = { continent = africa }
			}
		}
		modifier = {
			factor = 1
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				capital_scope = { continent = asia }
			}
			NOT = {
				any_owned_province = { continent = asia }
			}
		}
		modifier = {
			factor = 2
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				capital_scope = { continent = north_america }
			}
			NOT = {
				any_owned_province = { continent = north_america }
			}
		}
		modifier = {
			factor = 1
			any_greater_power = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				capital_scope = { continent = south_america }
			}
			NOT = {
				any_owned_province = { continent = south_america }
			}
		}
		modifier = {
			factor = 4
			war_policy = pacifism
		}
		modifier = {
			factor = 0.5
			war_policy = jingoism
		}
		modifier = {
			factor = 2
			war_exhaustion = 25
		}
		modifier = {
			factor = 2
			has_country_modifier = no_more_war
		}
	}

	option = {
		name = EVTOPTA96140
		set_country_flag = coalition_member
		remove_country_modifier = no_more_war
		any_greater_power = {
			limit = {
				badboy = 1.2
				is_disarmed = no
				has_country_modifier = international_pariah
				NOT = { has_country_modifier = punitive_effects }
				
				NOT = { relation = { who = THIS value = 50 } }
				NOT = { alliance_with = THIS }
				NOT = { truce_with = THIS }
				NOT = { neighbour = THIS }
			}
			country_event = 96141
		}
	}
}

#Notification of a declaration of war
country_event = {
	
	id = 96141
	title = "EVTNAME96141" #Joins the War
	desc = "EVTDESC96141"
	picture = "greatpowers"

	is_triggered_only = yes

	option = {
		name = "EVTOPTA96141" #We shall see.
		FROM = {
		
			war = {
				target = THIS
				attacker_goal = {
					casus_belli = free_dismantle_cb
				}
				call_ally = yes
			}
			
			badboy = -25
			
		}
	}
}

#If the Infamy country is disarmed before the war is over
country_event = {

	id = 96145
	title = EVTNAME96145
	desc = EVTDESC96145

	trigger = {
		has_country_flag = coalition_member
		OR = {
			has_country_modifier = great_war
			has_country_modifier = great_war2
			has_country_modifier = great_war3
		}
		ai = yes
		war = yes
		NOT = { has_country_modifier = end_the_war }
		any_greater_power = {
			badboy = 1.2
			is_disarmed = yes
			has_country_modifier = international_pariah
			NOT = { has_country_modifier = punitive_effects }
			war_with = THIS
		}
	}

	mean_time_to_happen = {
		days = 10
	}

	option = {
		name = EVTOPTA96145
		remove_country_modifier = great_war
		remove_country_modifier = great_war2
		remove_country_modifier = great_war3
		add_country_modifier = {
			name = end_the_war
			duration = 365
		}
	}
}

#remove the coalition member flag after a period of peace
country_event = {

	id = 96146
	title = EVTNAME96146
	desc = EVTDESC96146
	
	trigger = {
		has_country_flag = coalition_member
		NOT = { has_global_flag = ultimatum_refused }
		NOT = {
			any_greater_power = {
				has_country_modifier = international_pariah
				war_with = THIS
			}
		}
	}

	mean_time_to_happen = {
		months = 12
	}

	option = {
		name = EVTOPTA96146
		clr_country_flag = coalition_member
	}
}

#If the Infamy player defeats the coalition, and is at peace for an extended period, reset his infamy
country_event = {

	id = 96150
	title = "EVTNAME96150" #$COUNTRY$ Stands Triumphant
	desc = "EVTDESC96150"
	picture = "infamy_war_victory"

	trigger = {
		has_global_flag = ultimatum_refused
		has_country_modifier = international_pariah
		NOT = { has_country_modifier = punitive_effects }
		is_disarmed = no
		war = no
	}

	mean_time_to_happen = {
		months = 12
	}
	
	immediate = { badboy = -1000 }
	
	option = {
		name = "EVTOPTA96150" #Excellent
		clr_global_flag = ultimatum_refused
		remove_country_modifier = international_pariah
		prestige = 25
		badboy = 20
	}
}